# 🚀 Resrv 啟動指南

## 📋 查看前端網頁和後端 API 的方法

### 1️⃣ 啟動後端 API 伺服器

#### 步驟：
1. **進入後端目錄**
   ```bash
   cd backend
   ```

2. **安裝 Python 依賴**（如果還沒安裝）
   ```bash
   pip install -r requirements.txt
   ```
   或使用 pipenv：
   ```bash
   pipenv install
   ```

3. **資料庫配置**（已自動處理）
   - ✅ **無需額外配置！** 系統會自動使用 SQLite 資料庫 (`resrv.db`)
   - 如果需要使用 PostgreSQL，可以在 `backend` 目錄建立 `.env` 檔案：
     ```
     DATABASE_URL=postgresql://user:password@localhost:5432/resrv
     ```

4. **啟動後端伺服器**
   ```bash
   uvicorn main:app --reload
   ```
   或使用 pipenv：
   ```bash
   pipenv run uvicorn main:app --reload
   ```

5. **查看後端 API**
   - **API 文件（Swagger UI）**: 開啟瀏覽器訪問 `http://localhost:8000/docs`
   - **替代 API 文件（ReDoc）**: 訪問 `http://localhost:8000/redoc`
   - **API 根路徑**: 訪問 `http://localhost:8000/` 會看到 `{"msg": "Backend running successfully!"}`

---

### 2️⃣ 啟動前端網頁

#### 步驟：
1. **進入前端目錄**
   ```bash
   cd frontend
   ```

2. **安裝依賴**（如果還沒安裝）
   ```bash
   npm install
   ```

3. **設定環境變數**（可選，如果後端不是執行在 8000 端口）
   
   在 `frontend` 目錄下建立 `.env` 檔案：
   ```
   VITE_API_BASE=http://localhost:8000
   ```

4. **啟動前端開發伺服器**
   ```bash
   npm run dev
   ```

5. **查看前端網頁**
   - 瀏覽器會自動開啟，或手動訪問 `http://localhost:5173`

---

### 3️⃣ 同時執行前後端

#### 方法一：開啟兩個終端視窗
- **終端 1**：執行後端（在 `backend` 目錄）
  ```bash
  cd backend
  uvicorn main:app --reload
  ```

- **終端 2**：執行前端（在 `frontend` 目錄）
  ```bash
  cd frontend
  npm run dev
  ```

#### 方法二：使用 PowerShell 背景執行
在 PowerShell 中：
```powershell
# 啟動後端（背景執行）
cd backend
Start-Process powershell -ArgumentList "-NoExit", "-Command", "uvicorn main:app --reload"

# 啟動前端（背景執行）
cd frontend
Start-Process powershell -ArgumentList "-NoExit", "-Command", "npm run dev"
```

---

## 📍 訪問位址總結

| 服務 | 位址 | 說明 |
|------|------|------|
| **前端網頁** | http://localhost:5173 | React 應用程式 |
| **後端 API 文件** | http://localhost:8000/docs | Swagger UI 互動式 API 文件 |
| **後端 API 文件（ReDoc）** | http://localhost:8000/redoc | 替代 API 文件視圖 |
| **後端 API 根路徑** | http://localhost:8000/ | 測試後端是否執行 |

---

## 🔧 常見問題

### Q: 後端無法啟動？
- 確認已安裝所有依賴：`pip install -r requirements.txt`
- 確認 Python 版本（建議 3.8+）
- 檢查端口 8000 是否被占用
- ✅ **資料庫問題已修復**：系統會自動使用 SQLite，無需配置 DATABASE_URL

### Q: 前端無法連接後端？
- 確認後端已啟動並執行在 `http://localhost:8000`
- 檢查 `frontend/.env` 檔案中的 `VITE_API_BASE` 設定
- 確認後端的 CORS 設定允許前端來源

### Q: 如何查看 API 請求？
- 開啟瀏覽器開發者工具（F12）
- 切換到「Network」標籤
- 在前端操作時可以看到所有 API 請求

---

## 💡 提示

- **後端 API 文件** (`/docs`) 是最佳查看 API 的方式，可以：
  - 查看所有可用的 API 端點
  - 測試 API 功能
  - 查看請求和回應格式
  - 直接嘗試 API 呼叫

- **前端開發模式** (`npm run dev`) 支援：
  - 熱重載（修改程式碼自動重新整理）
  - 錯誤提示
  - 快速開發

